version: "3.9"

services:
  react-app:
    image: "${IMAGE}"
    container_name: react-app
    restart: always

    ports:
      - "80:80"

    # nginx already runs inside your image â†’ no extra service required
    # This container *is* your nginx server.

    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:80"]
      interval: 10s
      timeout: 5s
      retries: 5

    logging:
      driver: json-file
      options:
        max-size: "10m"
        max-file: "3"

    # Required because nginx inside needs to stay PID 1
    init: true

  uptime-kuma:
    image: louislam/uptime-kuma:1
    container_name: uptime-kuma
    restart: always
    ports:
      - "3001:3001"             # Uptime Kuma UI
    volumes:
      - uptime-kuma-data:/app/data

volumes:
  uptime-kuma-data:
